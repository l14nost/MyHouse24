<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/fragments/layout}">

<head>
    <meta charset="UTF-8">
    <title th:text = "#{user.card.title}"></title>
    <th:block layout:fragment="extra-style">
    </th:block>

</head>
<th:block layout:fragment="content">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header d-flex justify-content-between">
                <div class="header-title">
                    <h4 class="card-title" id="card-title"></h4>
                </div>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a class="text-color" th:href="@{/}" th:text = "#{users.breadcrumb.main}"></a></li>
                        <li class="breadcrumb-item active" aria-current="page"> <a class="text-color" th:href="@{/apartments}" th:text = "#{left.sidebar.apartments}"></a></li>
                        <li class="breadcrumb-item active" aria-current="page" id="breadcrumb"></li>
                    </ol>
                </nav>
            </div>
            <div class="card-body px-0">
            </div>
        </div>
    </div>
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
                    <div class="form-group" style="display: flex; justify-content: space-between">
                        <div>
                            <h3 th:text="#{apartment.card.title}"></h3>
                        </div>
                        <div>
                            <a href="" class="btn btn-gray" style="margin-left: 2px" id="cashButton">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512" fill="white"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M160 0c17.7 0 32 14.3 32 32V67.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V445.1c-.4-.1-.9-.1-1.3-.2l-.2 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11V32c0-17.7 14.3-32 32-32z"/></svg>
                                <h7 th:text="#{apartment.card.payment}"></h7>
                            </a>
                            <a href="" class="btn btn-gray" style="margin-left: 2px" id="billButton">
                                <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512" fill="white"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128z"/></svg>
                                <h7 th:text="#{apartment.card.bill}"></h7>
                            </a>
                            <a th:href="@{/apartments/edit-apartment/{id}(id = ${id})}" class="btn btn-primary" style="margin-left: 2px">
                                <svg xmlns="http://www.w3.org/2000/svg" style="margin: auto" height="1em" fill="white" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"/></svg>
                                <h7 th:text="#{apartment.card.edit}"></h7>
                            </a>
                        </div>
                    </div>
            </div>
            <div class="card-body ">
                <table class="table table-striped table-bordered" style="width: 100%">

                    <colgroup>
                        <col style="width:50%">
                        <col style="width:50%">
                    </colgroup>
                    <tbody id="userTable" style="min-height: 55px">
                        <tr>
                            <td><b th:text="#{apartment.card.bank.book}"></b></td>
                            <td id="bankBook"></td>
                        </tr>
                        <tr>
                            <td><b th:text="#{apartment.card.number}"></b></td>
                            <td id="number"></td>
                        </tr>
                        <tr>
                            <td><b th:text="#{apartment.card.area}"></b></td>
                            <td  id="area"></td>
                        </tr>
                        <tr>
                            <td><b th:text="#{apartment.card.house}"></b></td>
                            <td id="house"></td>
                        </tr>
                        <tr>
                            <td><b th:text="#{apartment.card.section}"></b></td>
                            <td  id="section"></td>
                        </tr>
                        <tr>
                            <td><b th:text="#{apartment.card.floor}"></b></td>
                            <td  id="floor"></td>
                        </tr>
                        <tr>
                            <td><b th:text="#{apartment.card.owner}"></b></td>
                            <td id="owner"></td>
                        </tr>
                        <tr>
                            <td><b th:text="#{apartment.card.rate}"></b></td>
                            <td id="rate"></td>
                        </tr>

                    </tbody>
                </table>
            </div>
            <div class="card-footer pt-0 pb-0" style="margin-bottom: 20px">
                <div>
                    <a th:href="'/myhouse24-amirb-nikitaf/admin/meter-readings/meter-readings-by-apartment?idApartment='+${id}+'&idService='+${0}" th:text="#{apartment.footer.1}"></a>
                </div>
                <div>
                    <a href="#" th:text="#{apartment.footer.2}" id="footer2"></a>
                </div>
                <div>
                    <a href="#" th:text="#{apartment.footer.3}" id="footer3"></a>
                </div>
            </div>
        </div>
    </div>
















</th:block>
<th:block layout:fragment="extra-modals">
</th:block>
<th:block layout:fragment="extra-script">
<script>
    $(document).ready(function () {
        $.ajax({
            url: "/myhouse24-amirb-nikitaf/admin/apartments/get-apartment-by-id/"+[[${id}]]
        })
            .done(function (response){
                console.log(response);
                $("#bankBook").html("<a href=\"/myhouse24-amirb-nikitaf/admin/bank-books/card-"+ response.bankBook.id + "\">"+ response.bankBook.number  +"</a>");
                $("#number").text(response.number);
                $("#area").text(response.area);
                $("#house").html("<a href=\"/myhouse24-amirb-nikitaf/admin/houses/house-card/ "+ response.house.id + "\">"+ response.house.name  +"</a>");
                $("#section").text(response.section);
                $("#floor").text(response.floor);
                $("#card-title").text(response.title);
                $("#breadcrumb").text(response.title);
                $("#owner").html("<a href=\"/myhouse24-amirb-nikitaf/admin/users/user-card/ "+ response.owner.id + "\">"+ response.owner.name  +"</a>");
                $("#rate").html("<a href=\"/myhouse24-amirb-nikitaf/admin/rates/card-"+ response.rate.id + "\">"+ response.rate.name  +"</a>");

                if (response.bankBook.number === null){
                    var cash = document.getElementById("cashButton");
                    cash.classList.add("disabled")

                    var bill = document.getElementById("billButton");
                    bill.classList.add("disabled")

                    var footer2 = document.getElementById("footer2");
                    footer2.href = "javascript:void(0);"
                    var footer3 = document.getElementById("footer3");
                    footer3.href = "javascript:void(0);"

                }
                else {
                    var cash = document.getElementById("cashButton");
                    if (response.bankBook.idCashBox!=0){
                        cash.href = "/myhouse24-amirb-nikitaf/admin/cash-box/add-copy-"+response.bankBook.idCashBox;
                    }
                    else {
                        cash.href = "/myhouse24-amirb-nikitaf/admin/cash-box/add-income";
                    }
                    var bill = document.getElementById("billButton");
                    bill.href = "/myhouse24-amirb-nikitaf/admin/bills/add-copy-bank-book-"+response.bankBook.id;

                    var footer2 = document.getElementById("footer2");
                    footer2.href = "/myhouse24-amirb-nikitaf/admin/cash-box"
                    var footer3 = document.getElementById("footer3");
                    footer3.href = "/myhouse24-amirb-nikitaf/admin/bills"

                }

            })
    });
</script>
</th:block>
</html>